"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[767],{1338:function(t,s,e){function i(t){var s=null;if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),i=0;i<e.length;i++){var n=e[i].trim();if(n.substring(0,t.length+1)==t+"="){s=decodeURIComponent(n.substring(t.length+1));break}}return s}e.d(s,{e:function(){return i}})},1767:function(t,s,e){e.r(s),e.d(s,{default:function(){return Qt}});var i=e(821);const n={id:"player-info"},o=["src"],a={class:"d-flex"},r=["src"],l=["src"],c=["src"],u=["src"],d=["src"],h={class:"card",style:{margin:"auto"}},p=["src"],w={class:"card-body"},_={id:"title"},g={id:"counter",class:"card-title"},y={key:0,class:"card-text"},m={class:"progress"},z=(0,i._)("div",{id:"quiz-timer",class:"progress-bar",role:"progressbar",style:{width:"0%"}},null,-1),f=[z],q={key:0,class:"list-group list-group-horizontal"},v={class:"list-group list-group-horizontal"},b={class:"card-body"},k={key:0},x=(0,i._)("span",null,"Solo",-1),C=[x],I=(0,i.Uk)(),Q=(0,i._)("br",null,null,-1),$=(0,i._)("br",null,null,-1),A=(0,i._)("span",{class:""},"Play with friend",-1),F=[A],S=(0,i._)("br",null,null,-1),D=(0,i._)("br",null,null,-1),O=(0,i._)("span",null,"Find opponent ",-1),W=[O],N=(0,i._)("span",null,"send message ",-1),E=[N],R={key:1},U={class:"d-flex",style:{"align-items":"center","justify-content":"center"}},L=["src"],T=["src"],j=["src"],B=["src"],P=["src"],Z=(0,i._)("h1",null,"Quiz has been finished",-1),G=(0,i._)("br",null,null,-1),H={class:"btn btn-success"},J=(0,i.Uk)("Take another quiz"),Y=["src"],K=["src"],M=["src"],V=["src"],X=["src"];function tt(t,s,e,z,x,A){const O=(0,i.up)("router-link"),N=(0,i.up)("WaitingForOpponent"),tt=(0,i.up)("round-transition");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.wy)((0,i._)("div",null,[(0,i.wy)((0,i._)("div",n,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(x.players,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"player-info-content",key:t},[(0,i._)("img",{class:(0,i.C_)(["player-photo",`player-photo-${t.id}`]),src:t.photo_url},null,10,o),(0,i._)("p",{class:(0,i.C_)(["player-name",`player-name-${t.id}`])},(0,i.zw)(t.name),3),(0,i._)("div",a,[(0,i._)("img",{style:{width:"32px",height:"32px"},src:`${t.rounds[0]}`},null,8,r),(0,i._)("img",{style:{width:"32px",height:"32px"},src:`${t.rounds[1]}`},null,8,l),(0,i._)("img",{style:{width:"32px",height:"32px"},src:`${t.rounds[2]}`},null,8,c),(0,i._)("img",{style:{width:"32px",height:"32px"},src:`${t.rounds[3]}`},null,8,u),(0,i._)("img",{style:{width:"32px",height:"32px"},src:`${t.rounds[4]}`},null,8,d)])])))),128))],512),[[i.F8,this.answers[0]]]),(0,i._)("div",h,[(0,i._)("img",{src:`${x.quiz.image}`,class:"card-img-top",alt:""},null,8,p),(0,i._)("div",w,[(0,i._)("h1",_,(0,i.zw)(this.quiz["title"]),1),(0,i._)("h5",g,(0,i.zw)(x.actualQuiz)+" / 5 ",1),this.question?((0,i.wg)(),(0,i.iD)("h3",y," Question: "+(0,i.zw)(this.question),1)):(0,i.kq)("",!0),(0,i.wy)((0,i._)("div",m,f,512),[[i.F8,x.answers[0]]])]),!1===x.loading?((0,i.wg)(),(0,i.iD)("ul",q,[(0,i.wy)((0,i._)("li",{onClick:s[0]||(s[0]=t=>A.handleSelectItem(this.answers[0],t)),id:"1",class:"option option-hover list-group-item w-50"},(0,i.zw)(this.answers[0]),513),[[i.F8,this.answers[0]]]),(0,i.wy)((0,i._)("li",{onClick:s[1]||(s[1]=t=>A.handleSelectItem(this.answers[1],t)),id:"2",class:"option option-hover list-group-item w-50"},(0,i.zw)(this.answers[1]),513),[[i.F8,this.answers[1]]])])):(0,i.kq)("",!0),(0,i.wy)((0,i._)("ul",v,[(0,i.wy)((0,i._)("li",{onClick:s[2]||(s[2]=t=>A.handleSelectItem(this.answers[2],t)),id:"3",class:"option option-hover list-group-item w-50"},(0,i.zw)(this.answers[2]),513),[[i.F8,this.answers[2]]]),(0,i.wy)((0,i._)("li",{onClick:s[3]||(s[3]=t=>A.handleSelectItem(this.answers[3],t)),id:"4",class:"option option-hover list-group-item w-50"},(0,i.zw)(this.answers[3]),513),[[i.F8,this.answers[3]]])],512),[[i.F8,this.answers[2]]]),(0,i._)("div",b,[this.question||this.quizFinished?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",k,[(0,i._)("button",{onClick:s[4]||(s[4]=t=>A.getActualQuiz(this.actualQuiz)),href:"#",class:"btn btn-success play-btn full-width",id:"start-button"},C),I,Q,$,(0,i._)("button",{onClick:s[5]||(s[5]=(...t)=>A.loadOppponent&&A.loadOppponent(...t)),href:"#",class:"btn btn-success play-btn full-width",id:"start-button"},F),S,D,(0,i._)("button",{onClick:s[6]||(s[6]=(...t)=>A.findOpponent&&A.findOpponent(...t)),href:"#",class:"btn btn-success play-btn full-width",id:"start-button"},W),(0,i._)("button",{onClick:s[7]||(s[7]=t=>A.playDuel()),href:"#",class:"btn btn-success play-btn full-width",id:"start-button"},E)])),x.quizFinished?((0,i.wg)(),(0,i.iD)("div",R,[(0,i._)("div",U,[(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[0]}`},null,8,L),(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[1]}`},null,8,T),(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[2]}`},null,8,j),(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[3]}`},null,8,B),(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[4]}`},null,8,P)]),Z,(0,i._)("h2",null,"Your points: "+(0,i.zw)(x.points)+" / "+(0,i.zw)(x.quiz["required_score_to_pass"]),1),(0,i._)("button",{onClick:s[8]||(s[8]=t=>this.$router.go()),class:"btn btn-success"},"Retry"),G,(0,i._)("button",H,[(0,i.Wm)(O,{to:{name:"Home"}},{default:(0,i.w5)((()=>[J])),_:1})]),(0,i._)("p",null,"author: "+(0,i.zw)(x.quiz["author"]),1)])):(0,i.kq)("",!0)])])],512),[[i.F8,!1===x.loading&(!0===x.is_lobby_ready|void 0===x.room_code)]]),(0,i.wy)((0,i.Wm)(N,null,null,512),[[i.F8,!0!==x.is_lobby_ready&void 0!==x.room_code]]),x.quiz["title"]?(0,i.wy)(((0,i.wg)(),(0,i.j4)(tt,{key:0,quiz_name:x.quiz["title"],quizIcon:x.quiz["icon"],round:x.actualQuiz},{round1:(0,i.w5)((()=>[(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[0]}`},null,8,Y)])),round2:(0,i.w5)((()=>[(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[1]}`},null,8,K)])),round3:(0,i.w5)((()=>[(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[2]}`},null,8,M)])),round4:(0,i.w5)((()=>[(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[3]}`},null,8,V)])),round5:(0,i.w5)((()=>[(0,i._)("img",{style:{width:"64px",height:"64px"},src:`${x.rounds[4]}`},null,8,X)])),_:1},8,["quiz_name","quizIcon","round"])),[[i.F8,!0===x.loading&&!1===x.quizFinished]]):(0,i.kq)("",!0)])}var st=e(1338);const et=t=>((0,i.dD)("data-v-16e5dc9f"),t=t(),(0,i.Cn)(),t),it={class:"RoundTransition"},nt=(0,i.Uk)(),ot=et((()=>(0,i._)("br",null,null,-1))),at={class:"d-flex"},rt=(0,i.Uk)(),lt=et((()=>(0,i._)("br",null,null,-1))),ct={class:"container"},ut=["src"],dt=et((()=>(0,i._)("br",null,null,-1))),ht=(0,i.Uk)(),pt=et((()=>(0,i._)("br",null,null,-1))),wt=["src"];function _t(t,s,e,n,o,a){return(0,i.wg)(),(0,i.iD)("div",it,[(0,i._)("h1",null,"Round "+(0,i.zw)(e.round),1),nt,ot,(0,i._)("div",at,[(0,i.WI)(t.$slots,"round1",{},void 0,!0),(0,i.WI)(t.$slots,"round2",{},void 0,!0),(0,i.WI)(t.$slots,"round3",{},void 0,!0),(0,i.WI)(t.$slots,"round4",{},void 0,!0),(0,i.WI)(t.$slots,"round5",{},void 0,!0)]),rt,lt,(0,i._)("div",ct,[(0,i._)("img",{id:"gif",style:{width:"100%",height:"100%"},src:`${this.gifUrl}`,alt:""},null,8,ut)]),dt,ht,pt,(0,i._)("h2",null,(0,i.zw)(e.quiz_name),1),(0,i._)("img",{id:"icon",style:{width:"64px",height:"64px"},src:`${e.quizIcon}`,alt:""},null,8,wt)])}var gt={name:"RoundTransition",props:{quiz_name:{type:String,required:!0},quizIcon:{type:String,required:!0},round:{type:Number,required:!0}},data(){return{gifUrl:"https://www.quizcity.net/static/assets/tram-animation.gif"}}},yt=e(3744);const mt=(0,yt.Z)(gt,[["render",_t],["__scopeId","data-v-16e5dc9f"]]);var zt=mt;const ft=(0,i.uE)('<div class="loader" data-v-43ad2ff1><div class="bar1" data-v-43ad2ff1></div><div class="bar2" data-v-43ad2ff1></div><div class="bar3" data-v-43ad2ff1></div><div class="bar4" data-v-43ad2ff1></div><div class="bar5" data-v-43ad2ff1></div><div class="bar6" data-v-43ad2ff1></div></div><div data-v-43ad2ff1>Waiting for opponent</div>',2),qt=[ft];function vt(t,s,e,n,o,a){return(0,i.wg)(),(0,i.iD)("div",null,qt)}var bt={name:"WaitingForOpponent"};const kt=(0,yt.Z)(bt,[["render",vt],["__scopeId","data-v-43ad2ff1"]]);var xt=kt,Ct={name:"QuizDetails",components:{RoundTransition:zt,WaitingForOpponent:xt},data(){return{rounds:["https://www.quizcity.net/static/assets/297806.png","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp"],players:[{id:0,name:this.$store.getters.getUserName,photo_url:"https://www.quizcity.net/static/assets/gamer-esports-player-competition-activity-256.webp",last_answer:"a",rounds:["https://www.quizcity.net/static/assets/297806.png","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp"]},{id:1,name:"guest2",photo_url:"https://www.quizcity.net/static/assets/gamer-esports-player-competition-activity-256.webp",last_answer:"a",answered:"false",rounds:["https://www.quizcity.net/static/assets/297806.png","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp","https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp"]}],quiz:[],slug:this.$route.params.slug,room_code:this.$route.params.room_code,selectedAnswer:null,correctAnswer:0,question:"",answers:[],actualQuiz:0,quizFinished:!1,quizStarted:!1,points:0,loading:!1,isChoosed:!1,timer:!1,socket:null,is_lobby_ready:!1,connected_users:1,mode:"solo",EmptyIcon:"https://www.quizcity.net/static/assets/lock_ordinary_security_secure_game_protect_safe-512.webp",CurrentIcon:"https://www.quizcity.net/static/assets/297806.png",IncorrectIcon:"https://www.quizcity.net/static/assets/3786049.png",CorrectIcon:"https://www.quizcity.net/static/assets/3786042.png"}},mounted(){this.room_code=this.$route.params.room_code,void 0!==this.room_code&&(this.loadGame(),this.mode="multiplayer"),console.log(this.room_code),fetch("https://www.quizcity.net/api/details/"+this.slug+"/").then((t=>t.json())).then((t=>this.quiz=t)).then((t=>this.correctAnswer=t.answer)).catch((t=>console.log(t.message)))},watch:{loading:function(){const t=document.getElementById("quiz-timer");if(!1===this.loading)this.timer=!0,t.animate({width:"100%"},5e3);else if(!0===this.timer){const s=t.getAnimations();s.length>0&&s[0].finish(),this.timer=!1}},connected_users(){2===this.connected_users&&(console.log("ready"),this.is_lobby_ready=!0,this.getActualQuiz(this.actualQuiz))}},methods:{getCookie:st.e,connectPlayer(){this.socket=new WebSocket("ws://localhost:8002/ws/game/"+this.room_code),this.socket.onopen=function(){console.log("Socket connected")},this.socket.onmessage=t=>{let s=t.data;s=JSON.parse(s),console.log(s.payload.player),console.log(s.payload),this.connected_users=s.payload,console.log("connected users"+this.connected_users),this.players[1].rounds[this.actualQuiz-1]=s.payload.answer,console.log("next?:"+s.payload.next),console.log("opponent answered?: "+this.players[1].answered),0!==this.actualQuiz&&(this.players[1].answered="true")},this.socket.onclose=function(){console.log("socked closed")}},playDuel(){let t=null;t=this.selectedAnswer===this.correctAnswer;let s={player:this.players[0].name,answer:t,level:this.actualQuiz+1};this.socket.send(JSON.stringify({data:s}))},saveQuizTaker(){},loadGame(){fetch("https://www.quizcity.net/api/mygames/"+this.room_code+"/").then((t=>t.json())).then((t=>{this.players[0].name===t.game_creator.username||t.game_opponent.username?(console.log("you have acces to this room"),this.connectPlayer()):console.log("access denied")})).catch((t=>console.log(t.message)))},loadOppponent(){console.log(this.quiz["title"]),this.$router.push({name:"Friends",params:{quiz_to_invite_slug:this.quiz["slug"],quiz_to_invite_name:this.quiz["title"],quiz_to_invite_id:this.quiz["id"]}})},findOpponent(){alert("looking for opponent"),fetch("https://www.quizcity.net/api/quiztaker/").then((t=>t.json())).then((t=>{for(let s of t)console.log("fetched game title: "+s.quiz_data.title),console.log("this game title:"+this.quiz["title"]),1===s.connected_users&&s.quiz_data.title===this.quiz["title"]?(console.log("found a game"),window.location.href="http://localhost:8002/quizgame/quizes/"+this.quiz["slug"]+"/"+s.room_code):console.log("no games right now, gameid"+s.room_code)})).catch((t=>console.log(t.message)))},loadNextRound(){!1===this.quizFinished&&(this.loading=!0,setTimeout((()=>this.loading=!1),2e3),this.isChoosed=!1,this.players[0].rounds[this.actualQuiz]=this.CurrentIcon,console.log(this.players[1].rounds[0]),this.players[1].answered="false")},checkCorrectAnswer(){this.selectedAnswer==this.correctAnswer?(this.rounds[this.actualQuiz-1]=this.CorrectIcon,this.players[0].rounds[this.actualQuiz-1]=this.CorrectIcon,this.points+=10):(this.rounds[this.actualQuiz-1]=this.IncorrectIcon,this.players[0].rounds[this.actualQuiz-1]=this.IncorrectIcon),this.playDuel()},resetOptions(){this.answers=[],this.selectedAnswer="";let t=document.getElementsByClassName("option");Array.from(t).forEach((t=>{t.classList.remove("active"),t.classList.remove("correct"),t.classList.remove("incorrect"),t.classList.add("option-hover"),t.textContent="",this.correctAnswer=""}))},getActualQuiz(t){!this.selectedAnswer&&this.quizStarted||(this.resetOptions(),this.players.answered,void 0!==this.quiz["random_questions"][t]?(this.question=this.quiz["random_questions"][t].text,this.quiz["random_questions"][t]["answer_set"].forEach((t=>{this.answers.push(t["text"]),!0===t["is_correct"]&&(this.correctAnswer=t["text"])}))):(this.actualQuizNumber,this.question="",this.quizFinished=!0));let s=null;"solo"===this.mode?!this.quizFinished&&this.actualQuiz<=5&&this.actualQuiz++:0===this.actualQuiz?(!this.quizFinished&&this.actualQuiz<=5&&this.actualQuiz++,s=setInterval((()=>{!0===this.isChoosed&"true"===this.players[1].answered?(this.actualQuiz++,this.loadNextRound(),clearInterval(s),console.log("again..")):console.log("cant go further")}),2e3)):s=setInterval((()=>{!0===this.isChoosed&"true"===this.players[1].answered?(this.actualQuiz++,this.loadNextRound(),clearInterval(s),console.log("again..")):console.log("cant go further")}),2e3)},handleSelectItem(t,s={}){if(!1===this.isChoosed){s.target.classList.add("active");let e=document.getElementsByClassName("option");Array.from(e).forEach((t=>{t.textContent!==this.correctAnswer&&t.textContent===s.target.textContent&&t.classList.add("incorrect"),t.textContent===this.correctAnswer&&t.classList.add("correct"),t.classList.remove("option-hover")}));let i=null;if("multiplayer"===this.mode&"false"===this.players[1].answered)i=setInterval((()=>{!0===this.isChoosed&"false"===this.players[1].answered&&(this.handleSelectItem(t,s),clearInterval(i),console.log("shit"))}),2e3),this.checkCorrectAnswer();else{const s=document.getElementById("quiz-timer"),e=s.getAnimations();e.length>0&&e[0].pause(),setTimeout((()=>this.getActualQuiz(this.actualQuiz)),2e3),""===this.selectedAnswer&&(this.selectedAnswer=t),this.checkCorrectAnswer(),this.quizStarted=!0,this.rounds[this.actualQuiz]=this.CurrentIcon}}this.isChoosed=!0}}};const It=(0,yt.Z)(Ct,[["render",tt]]);var Qt=It}}]);
//# sourceMappingURL=767.js.map